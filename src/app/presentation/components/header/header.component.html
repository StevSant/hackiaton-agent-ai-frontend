<header
  class="sticky top-0 z-40 bg-base-100/80 backdrop-blur border-b border-base-200"
>
  <div class="mx-auto max-w-7xl px-5 py-3 flex items-center justify-between">
    <!-- Botón menú -->
    <button
      (click)="toggleMenu()"
      class="ml-4 px-2 py-1 rounded bg-base-200 hover:bg-base-300 focus:outline-none"
      aria-label="Abrir menú"
    >
      <mat-icon fontIcon="menu"></mat-icon>
    </button>

    <!-- Nav -->
    <nav class="flex items-center gap-2" aria-label="Primary">
      <!-- Dropdown Repositorios -->
      <div
        class="relative"
        (click)="$event.stopPropagation()"
        (keydown)="$event.stopPropagation()"
      >
        <button
          type="button"
          (click)="toggleRepos($event)"
          class="btn btn-sm btn-ghost focus:outline-none focus:ring-2 focus:ring-primary flex items-center gap-1"
          aria-haspopup="menu"
          [attr.aria-expanded]="isOpen"
        >
          <mat-icon
            fontIcon="folder"
            class="opacity-80"
            aria-hidden="true"
          ></mat-icon>
          <span class="hidden sm:inline">Info</span>
          <svg
            class="w-3 h-3 ml-1"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>

        <!-- Menú -->
        @if (isOpen) {
          <div
            class="absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-base-100 ring-1 ring-black/10 z-50 isolate backdrop-blur-0"
            style="--tw-bg-opacity: 1"
            role="menu"
            aria-label="Repositorios del proyecto"
          >
            <div class="py-1">
              <a
                [href]="backend_repository"
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center px-4 py-2 text-sm transition-colors duration-150 hover:bg-primary/10 hover:text-primary"
                role="menuitem"
              >
                <mat-icon
                  fontIcon="storage"
                  class="opacity-80 mr-2"
                  aria-hidden="true"
                ></mat-icon>
                Backend
              </a>
              <a
                [href]="frontend_repository"
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center px-4 py-2 text-sm transition-colors duration-150 hover:bg-primary/10 hover:text-primary"
                role="menuitem"
              >
                <mat-icon
                  fontIcon="web"
                  class="opacity-80 mr-2"
                  aria-hidden="true"
                ></mat-icon>
                Frontend
              </a>
              <a
                [href]="youtube_video"
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center px-4 py-2 text-sm transition-colors duration-150 hover:bg-primary/10 hover:text-primary"
                role="menuitem"
              >
                <mat-icon
                  fontIcon="youtube_activity"
                  class="opacity-80 mr-2"
                  aria-hidden="true"
                ></mat-icon>
                YouTube Video
              </a>
            </div>
          </div>
        }
      </div>

      <!-- Otros botones -->
      @if (isAdmin) {
        <a
          routerLink="/admin"
          routerLinkActive="btn-primary"
          class="btn btn-sm btn-ghost focus:outline-none focus:ring-2 focus:ring-primary hover:bg-primary/10"
          aria-label="Admin"
        >
          <mat-icon
            fontIcon="admin_panel_settings"
            class="opacity-80"
            aria-hidden="true"
          ></mat-icon>
          <span class="ml-1">{{ "COMMON.ADMIN" | translate }}</span>
        </a>
      }
      <a
        routerLink="/chat"
        routerLinkActive="btn-primary"
        class="btn btn-sm btn-ghost focus:outline-none focus:ring-2 focus:ring-primary"
        aria-label="Chat"
      >
        <mat-icon
          fontIcon="chat"
          class="opacity-80"
          aria-hidden="true"
        ></mat-icon>
        <span class="ml-1">{{ "COMMON.OPEN" | translate }}</span>
      </a>
    </nav>
  </div>
</header>
