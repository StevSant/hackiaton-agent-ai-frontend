<div class="p-4 space-y-4">
  <div class="flex items-center gap-3">
  <select class="select select-bordered select-sm" [value]="type()" (change)="onTypeChange(($any($event.target)).value)">
      <option value="">{{ 'FILES_PAGE.FILTER_ALL' | translate }}</option>
      <option value="image">{{ 'FILES_PAGE.FILTER_IMAGES' | translate }}</option>
      <option value="pdf">{{ 'FILES_PAGE.FILTER_PDFS' | translate }}</option>
      <option value="document">{{ 'FILES_PAGE.FILTER_DOCUMENTS' | translate }}</option>
    </select>
    <input type="file" multiple class="file-input file-input-bordered file-input-sm" (change)="onUpload($event)" />
  </div>

  @if (loading()) { <div class="text-sm opacity-70">{{ 'COMMON.LOADING' | translate }}</div> }
  @if (error()) { <div class="text-sm text-error">{{ error() }}</div> }

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
  @for (item of items(); track item.id) {
  <div class="card glass-surface p-3">
      <div class="text-sm font-semibold">{{ item.filename }}</div>
      <div class="text-xs opacity-70 flex items-center gap-2 flex-wrap">
        <span>{{ item.type_file }} â€¢ {{ item.content_type }}</span>
    @if (item.converted) { <span class="badge badge-ghost badge-xs">{{ 'FILES_PAGE.CONVERTED' | translate }}</span> }
    @if (item.extracted_available) { <span class="badge badge-success badge-xs">{{ 'FILES_PAGE.EXTRACTED' | translate }}</span> }
      </div>
      <div class="text-xs break-all flex items-center gap-2">
        <span class="truncate">ID: {{ item.id }}</span>
        <button class="btn btn-ghost btn-xs" (click)="copyId(item.id)" [title]="'FILES_PAGE.COPY_ID' | translate">
          {{ 'FILES_PAGE.COPY' | translate }}
        </button>
      </div>
      <div class="mt-2">
        <ng-container [ngSwitch]="item.type_file">
          <img *ngSwitchCase="'image'" [src]="item.url" alt="" class="rounded max-h-40 object-cover" />
          <a *ngSwitchCase="'pdf'" class="link link-primary" [href]="item.url" target="_blank">{{ 'FILES_PAGE.VIEW_PDF' | translate }}</a>
          <a *ngSwitchDefault class="link link-primary" [href]="item.url" target="_blank">{{ 'FILES_PAGE.DOWNLOAD' | translate }}</a>
        </ng-container>
      </div>
      <div class="mt-2 text-xs">{{ 'FILES_PAGE.COPY_ID_HINT' | translate }}</div>
    </div>
  }
  </div>
  <div class="flex items-center justify-end gap-2">
    <button class="btn btn-sm" (click)="prevPage()" [disabled]="page()<=1">{{ 'COMMON.PREVIOUS' | translate }}</button>
    <span class="text-sm opacity-70">{{ 'COMMON.PAGE' | translate }} {{ page() }}</span>
    <button class="btn btn-sm" (click)="nextPage()" [disabled]="page()*limit()>=total()">{{ 'COMMON.NEXT' | translate }}</button>
  </div>
</div>
