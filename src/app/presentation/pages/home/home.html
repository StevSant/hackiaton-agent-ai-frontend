<!-- Public Home page -->
<div class="min-h-dvh overflow-x-hidden relative bg-home vt-page text-[15px]">
  <!-- Header fijo extraído a componente -->
  <app-header
    [(isOpen)]="open"
    [info]="info()"
    [isAdmin]="isAdmin()"
  ></app-header>

  <!-- Contenido principal -->
  <main id="main" class="mx-auto max-w-7xl px-5 py-6 md:py-8">
    <!-- Hero -->
    <section class="grid gap-3">
      <h1
        class="text-3xl md:text-5xl font-semibold tracking-tight k-gradient-title leading-tight pb-2"
      >
        {{ "HOME.TITLE" | translate }}
      </h1>
      <p class="max-w-2xl text-sm md:text-base opacity-80">
        {{ "HOME.SUBTITLE" | translate }}
      </p>
    </section>

    <!-- Texto explicativo -->
    <section class="px-0 mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6">
      <figure
        class="glass-card p-4 min-h-[260px] lg:col-span-1 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1"
      >
        <div class="flex items-center justify-between">
          <h3 class="font-medium" id="totalTimeChartTitle">
            {{ "HOME.MKT.TOTAL_TIME_TITLE" | translate }}
          </h3>
          <mat-icon
            fontIcon="timer"
            class="opacity-80 transition-colors duration-300 hover:text-primary"
            aria-hidden="true"
          ></mat-icon>
        </div>
        <p class="mt-3 text-xs opacity-70" id="totalTimeChartDesc">
          {{ "HOME.MKT.TOTAL_TIME_DESC" | translate }}
        </p>
        <app-lazy-chart
          class="mt-3"
          [chartType]="'bar'"
          [data]="totalTimeChartData()"
          [options]="{
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: { y: { beginAtZero: true } },
          }"
          [ariaLabelledby]="'totalTimeChartTitle totalTimeChartDesc'"
        ></app-lazy-chart>
        <figcaption class="sr-only">
          {{ "HOME.MKT.TOTAL_TIME_DESC" | translate }}
        </figcaption>
      </figure>

      <article
        class="glass-card p-4 lg:col-span-2 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1"
      >
        <h3 class="font-medium">{{ "HOME.MKT.RETO_TITLE" | translate }}</h3>
        <div class="mt-3 space-y-3 text-sm opacity-90 leading-relaxed">
          <p>{{ "HOME.MKT.OBJETIVO_INTRO" | translate }}</p>
          <p>{{ "HOME.MKT.IMPORTA_INTRO" | translate }}</p>
          <ul class="list-disc ml-5 opacity-90 marker:opacity-60 space-y-1">
            <li>{{ "HOME.MKT.BULLET1" | translate }}</li>
            <li>{{ "HOME.MKT.BULLET2" | translate }}</li>
            <li>{{ "HOME.MKT.BULLET3" | translate }}</li>
            <li>{{ "HOME.MKT.BULLET4" | translate }}</li>
          </ul>
        </div>
      </article>
    </section>

    <section class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6">
      <article
        class="glass-card p-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1"
      >
        <h3 class="font-medium">{{ "HOME.MKT.IA_TITLE" | translate }}</h3>
        <div class="mt-3 text-sm opacity-90 leading-relaxed space-y-2">
          <p>{{ "HOME.MKT.IA_P1" | translate }}</p>
          <p>{{ "HOME.MKT.IA_P2" | translate }}</p>
          <p>{{ "HOME.MKT.IA_P3" | translate }}</p>
          <p>{{ "HOME.MKT.IA_P4" | translate }}</p>
        </div>
      </article>

      <aside
        class="glass-card p-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1"
      >
        <h3 id="deliverablesTitle" class="font-medium">
          {{ "HOME.MKT.ENTREGABLES_TITLE" | translate }}
        </h3>
        <ul class="mt-3 list-disc ml-5 text-sm opacity-90 space-y-1">
          <li>{{ "HOME.MKT.ENT_ITEM1" | translate }}</li>
          <li>{{ "HOME.MKT.ENT_ITEM2" | translate }}</li>
          <li>{{ "HOME.MKT.ENT_ITEM3" | translate }}</li>
          <li>{{ "HOME.MKT.ENT_ITEM4" | translate }}</li>
        </ul>
        <p class="mt-4 text-xs opacity-70">
          {{ "HOME.MKT.DATOS_LABEL" | translate }}
        </p>
      </aside>
    </section>

    <!-- KPIs -->
    <section class="mt-6 md:mt-8" aria-labelledby="kpi-title">
      <h2 id="kpi-title" class="sr-only">
        {{ "HOME.KPI_SECTION" | translate }}
      </h2>
      <dl class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6">
        <div
          class="glass-card p-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1 focus-within:ring-2 focus-within:ring-primary"
        >
          <div class="flex items-center justify-between">
            <dt class="text-xs opacity-70">
              {{ "HOME.KPI_SPEED" | translate }}
            </dt>
            <mat-icon
              fontIcon="bolt"
              class="opacity-80 transition-colors duration-300 hover:text-primary"
              aria-hidden="true"
            ></mat-icon>
          </div>
          <dd
            class="mt-2 text-2xl font-semibold"
            [attr.aria-label]="'HOME.KPI_SPEED' | translate"
          >
            {{ kpiSpeedDisplay() }}
          </dd>
          <p class="text-xs opacity-60 mt-1">
            {{ "HOME.KPI_SPEED_HINT" | translate }}
          </p>
        </div>

        <div
          class="glass-card p-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1 focus-within:ring-2 focus-within:ring-primary"
        >
          <div class="flex items-center justify-between">
            <dt class="text-xs opacity-70">
              {{ "HOME.KPI_APPROVAL" | translate }}
            </dt>
            <mat-icon
              fontIcon="thumb_up"
              class="opacity-80 transition-colors duration-300 hover:text-primary"
              aria-hidden="true"
            ></mat-icon>
          </div>
          <dd class="mt-2 text-2xl font-semibold">
            {{ kpiApprovalDisplay() }}
          </dd>
          <p class="text-xs opacity-60 mt-1">
            {{ "HOME.KPI_APPROVAL_HINT" | translate }}
          </p>
        </div>

        <div
          class="glass-card p-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1 focus-within:ring-2 focus-within:ring-primary"
        >
          <div class="flex items-center justify-between">
            <dt class="text-xs opacity-70">
              {{ "HOME.KPI_OBJECTIVITY" | translate }}
            </dt>
            <mat-icon
              fontIcon="insights"
              class="opacity-80 transition-colors duration-300 hover:text-primary"
              aria-hidden="true"
            ></mat-icon>
          </div>
          <dd class="mt-2 text-2xl font-semibold">
            {{ kpiObjectivityDisplay() }}
          </dd>
          <p class="text-xs opacity-60 mt-1">
            {{ "HOME.KPI_OBJECTIVITY_HINT" | translate }}
          </p>
        </div>

        <div
          class="glass-card p-4 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-1 focus-within:ring-2 focus-within:ring-primary"
        >
          <div class="flex items-center justify-between">
            <dt class="text-xs opacity-70">
              {{ "HOME.KPI_TIME" | translate }}
            </dt>
            <mat-icon
              fontIcon="timer"
              class="opacity-80 transition-colors duration-300 hover:text-primary"
              aria-hidden="true"
            ></mat-icon>
          </div>
          <dd class="mt-2 text-2xl font-semibold">
            {{ kpiTimeDisplay() }}
          </dd>
          <p class="text-xs opacity-60 mt-1">
            {{ "HOME.KPI_TIME_HINT" | translate }}
          </p>
        </div>
      </dl>
    </section>
  </main>

  <!-- Footer -->
  <footer class="mt-10 border-t border-base-200">
    <div
      class="mx-auto max-w-7xl px-5 py-6 text-xs md:text-sm text-center opacity-80"
    >
      <p class="mb-2">
        © {{ info()?.site_name || ("SHELL.APP_TITLE" | translate) }} ·
        {{ today | date: "yyyy" }}
      </p>

      <div
        class="flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-4 font-semibold"
      >
        @for (member of teamMembers; track $index) {
          <span
            class="px-3 py-1 rounded-full bg-gradient-to-r from-primary via-secondary to-primary text-white shadow-lg ring-2 ring-primary/70 hover:scale-110 hover:ring-secondary/80 transition-all duration-200 border border-white/10"
          >
            {{ member }}
          </span>
        }
      </div>
    </div>
  </footer>

  <!-- Menú flotante -->
  <div class="fixed bottom-4 right-4 z-50">
    <app-profile-menu
      [compact]="true"
      [attr.aria-label]="'COMMON.PROFILE_MENU' | translate"
    ></app-profile-menu>
  </div>
</div>
