<div class="p-6 space-y-6 vt-page">
  <h1
    class="text-2xl font-bold sticky top-0 z-20"
  >
    {{ "ADMIN.DASHBOARD.TITLE" | translate }}
  </h1>

  <div class="flex flex-col lg:flex-row gap-6 items-start justify-between">
    <div class="metrics-grid flex-1 min-w-0">
      <div class="metric-card p-6 flex flex-col items-center metric-card-animation">
        <div class="metric-icon">üë•</div>
        <span class="metric-label">{{ "ADMIN.DASHBOARD.CARD_USERS" | translate }}</span>
        <span class="metric-value">{{ totals()["users"] || 0 }}</span>
      </div>
      <div class="metric-card p-6 flex flex-col items-center metric-card-animation">
        <div class="metric-icon">üí¨</div>
        <span class="metric-label">{{ "ADMIN.DASHBOARD.CARD_SESSIONS" | translate }}</span>
        <span class="metric-value">{{ totals()["sessions"] || 0 }}</span>
      </div>
      <div class="metric-card p-6 flex flex-col items-center metric-card-animation">
        <div class="metric-icon">üì®</div>
        <span class="metric-label">{{ "ADMIN.DASHBOARD.CARD_MESSAGES" | translate }}</span>
        <span class="metric-value">{{ totals()["messages"] || 0 }}</span>
      </div>
      <div class="metric-card p-6 flex flex-col items-center metric-card-animation">
        <div class="metric-icon">üìÅ</div>
        <span class="metric-label">{{ "ADMIN.DASHBOARD.CARD_FILES" | translate }}</span>
        <span class="metric-value">{{ totals()["files"] || 0 }}</span>
      </div>
    </div>
    <div class="time-filter-container">
      <button
        class="time-filter-btn"
        [class.active]="days() === 7"
        (click)="setDays(7)"
      >
        7d
      </button>
      <button
        class="time-filter-btn"
        [class.active]="days() === 30"
        (click)="setDays(30)"
      >
        30d
      </button>
      <button
        class="time-filter-btn"
        [class.active]="days() === 90"
        (click)="setDays(90)"
      >
        90d
      </button>
    </div>
  </div>

  <div class="modern-card p-6">
    <div class="charts-grid">
      <div class="chart-container">
        <div class="chart-title">
          {{ "ADMIN.DASHBOARD.ACTIVITY_30D" | translate }}
        </div>
        @if (isBrowser()) {
          <canvas #activityCanvas class="block h-full w-full"></canvas>
        } @else {
          <div class="chart-loading">
            <div class="loading-spinner"></div>
          </div>
        }
      </div>
      <div class="chart-container">
        <div class="chart-title">
          {{ "ADMIN.DASHBOARD.FILES_BY_TYPE" | translate }}
        </div>
        @if (isBrowser()) {
          <canvas #filesCanvas class="block h-full w-full"></canvas>
        } @else {
          <div class="chart-loading">
            <div class="loading-spinner"></div>
          </div>
        }
      </div>
    </div>
  </div>
  <div class="nav-grid page-stagger">
    @for (s of sections; track s.route) {
      <a
        [routerLink]="[s.route]"
        class="nav-card p-6"
      >
        <div class="nav-card-content">
          <mat-icon>{{ s.icon }}</mat-icon>
          <div>
            <div class="nav-card-title">{{ s.title | translate }}</div>
            <div class="nav-card-desc">{{ s.desc | translate }}</div>
          </div>
        </div>
      </a>
    }
  </div>
</div>
