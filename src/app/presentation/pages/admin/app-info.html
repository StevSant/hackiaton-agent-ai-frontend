<link rel="stylesheet" href="./app-info.css">
<div class="app-info-container vt-page">
  <!-- Header Section -->
  <div class="app-info-header">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">
          <i class="fas fa-cog title-icon"></i>
          {{ "ADMIN.SIDENAV.APP_INFO" | translate }}
        </h1>
        <p class="page-subtitle">
          Configura la información básica de tu aplicación
        </p>
      </div>
    </div>
  </div>

  <!-- Error Alert -->
  @if (error()) {
    <div class="error-alert">
      <i class="fas fa-exclamation-triangle"></i>
      <span>{{ error() }}</span>
    </div>
  }

  <!-- Main Content -->
  <div class="main-content">
    <form [formGroup]="form" (ngSubmit)="save()" class="app-info-form">
      
      <!-- Site Name Section -->
      <div class="form-section">
        <div class="section-header">
          <h3 class="section-title">
            <i class="fas fa-tag"></i>
            Información General
          </h3>
        </div>
        
        <div class="input-group">
          <label class="input-label" for="site_name">
            <i class="fas fa-globe"></i>
            {{ "ADMIN.APP_INFO.FIELDS.SITE_NAME" | translate }}
          </label>
          <input
            id="site_name"
            class="modern-input"
            formControlName="site_name"
            placeholder="Nombre de tu sitio web"
          />
        </div>
      </div>

      <!-- Visual Assets Section -->
      <div class="form-section">
        <div class="section-header">
          <h3 class="section-title">
            <i class="fas fa-image"></i>
            Recursos Visuales
          </h3>
        </div>

        <div class="assets-grid">
          <!-- Site Icon -->
          <div class="asset-card">
            <div class="asset-header">
              <h4 class="asset-title">
                <i class="fas fa-star"></i>
                {{ "ADMIN.APP_INFO.FIELDS.SITE_ICON" | translate }}
              </h4>
              <span class="asset-description">Ícono del sitio (32x32px recomendado)</span>
            </div>
            
            <div class="asset-input-group">
              <input
                id="site_icon"
                class="modern-input asset-input"
                formControlName="site_icon"
                placeholder="URL del ícono"
              />
              <label class="upload-btn icon-upload">
                <input
                  type="file"
                  accept="image/*"
                  class="hidden"
                  (change)="onPickIcon($event)"
                />
                <i class="fas fa-cloud-upload-alt"></i>
                <span>
                  {{
                    uploadingIcon()
                      ? ("COMPOSER.UPLOADING" | translate)
                      : ("ADMIN.APP_INFO.UPLOAD" | translate)
                  }}
                </span>
              </label>
            </div>
            
            @if (form.value.site_icon) {
              <div class="asset-preview">
                <div class="preview-container icon-preview">
                  <img
                    [src]="form.value.site_icon!"
                    alt="icon preview"
                    class="preview-image"
                  />
                  <div class="preview-overlay">
                    <i class="fas fa-eye"></i>
                  </div>
                </div>
                <span class="preview-label">Vista previa del ícono</span>
              </div>
            }
          </div>

          <!-- Site Logo -->
          <div class="asset-card">
            <div class="asset-header">
              <h4 class="asset-title">
                <i class="fas fa-image"></i>
                {{ "ADMIN.APP_INFO.FIELDS.SITE_LOGO" | translate }}
              </h4>
              <span class="asset-description">Logo principal (300x100px recomendado)</span>
            </div>
            
            <div class="asset-input-group">
              <input
                id="site_logo"
                class="modern-input asset-input"
                formControlName="site_logo"
                placeholder="URL del logo"
              />
              <label class="upload-btn logo-upload">
                <input
                  type="file"
                  accept="image/*"
                  class="hidden"
                  (change)="onPickLogo($event)"
                />
                <i class="fas fa-cloud-upload-alt"></i>
                <span>
                  {{
                    uploadingLogo()
                      ? ("COMPOSER.UPLOADING" | translate)
                      : ("ADMIN.APP_INFO.UPLOAD" | translate)
                  }}
                </span>
              </label>
            </div>
            
            @if (form.value.site_logo) {
              <div class="asset-preview">
                <div class="preview-container logo-preview">
                  <img
                    [src]="form.value.site_logo!"
                    alt="logo preview"
                    class="preview-image"
                  />
                  <div class="preview-overlay">
                    <i class="fas fa-eye"></i>
                  </div>
                </div>
                <span class="preview-label">Vista previa del logo</span>
              </div>
            }
          </div>
        </div>
      </div>

      <!-- Action Section -->
      <div class="action-section">
        <div class="action-buttons">
          <button
            class="save-btn"
            type="submit"
            [disabled]="form.invalid || saving()"
          >
            @if (saving()) {
              <i class="fas fa-spinner fa-spin"></i>
              <span>{{ "LOGIN.PROCESSING" | translate }}</span>
            } @else {
              <i class="fas fa-save"></i>
              <span>{{ "ADMIN.APP_INFO.SAVE" | translate }}</span>
            }
          </button>
          
          @if (saved()) {
            <div class="success-message">
              <i class="fas fa-check-circle"></i>
              <span>{{ "ADMIN.APP_INFO.SAVED" | translate }}</span>
            </div>
          }
        </div>
      </div>
    </form>
  </div>

  <!-- Loading State -->
  @if (!loaded()) {
    <div class="loading-overlay">
      <div class="loading-content">
        <i class="fas fa-spinner fa-spin loading-spinner"></i>
        <span>{{ "COMMON.LOADING" | translate }}</span>
      </div>
    </div>
  }
</div>
