<div class="p-6 space-y-4 vt-page">
  <h2
    class="text-xl font-semibold sticky top-0 z-20 bg-card/70 backdrop-blur rounded-md p-2"
  >
    {{ "ADMIN.SIDENAV.APP_INFO" | translate }}
  </h2>
  @if (error()) {
  <div class="alert alert-error">{{ error() }}</div>
  }
  <div class="glass-card">
    <form
      [formGroup]="form"
      (ngSubmit)="save()"
      class="grid grid-cols-1 md:grid-cols-2 gap-3"
    >
      <div>
        <label class="text-xs" for="site_name">{{
          "ADMIN.APP_INFO.FIELDS.SITE_NAME" | translate
        }}</label>
        <input
          id="site_name"
          class="input input-bordered w-full"
          formControlName="site_name"
        />
      </div>
      <div>
        <label class="text-xs" for="site_icon">{{
          "ADMIN.APP_INFO.FIELDS.SITE_ICON" | translate
        }}</label>
        <div class="flex items-center gap-2 flex-wrap">
          <input
            id="site_icon"
            class="input input-bordered w-full md:flex-1"
            formControlName="site_icon"
          />
          <label class="btn btn-sm w-full md:w-auto">
            <input
              type="file"
              accept="image/*"
              class="hidden"
              (change)="onPickIcon($event)"
            />
            {{
              uploadingIcon()
                ? ("COMPOSER.UPLOADING" | translate)
                : ("ADMIN.APP_INFO.UPLOAD" | translate)
            }}
          </label>
        </div>
        @if (form.value.site_icon) {
        <div class="mt-2">
          <img
            [src]="form.value.site_icon!"
            alt="icon preview"
            class="h-10 w-10 object-contain rounded border border-white/10"
          />
        </div>
        }
      </div>
      <div>
        <label class="text-xs" for="site_logo">{{
          "ADMIN.APP_INFO.FIELDS.SITE_LOGO" | translate
        }}</label>
        <div class="flex items-center gap-2 flex-wrap">
          <input
            id="site_logo"
            class="input input-bordered w-full md:flex-1"
            formControlName="site_logo"
          />
          <label class="btn btn-sm w-full md:w-auto">
            <input
              type="file"
              accept="image/*"
              class="hidden"
              (change)="onPickLogo($event)"
            />
            {{
              uploadingLogo()
                ? ("COMPOSER.UPLOADING" | translate)
                : ("ADMIN.APP_INFO.UPLOAD" | translate)
            }}
          </label>
        </div>
        @if (form.value.site_logo) {
        <div class="mt-2">
          <img
            [src]="form.value.site_logo!"
            alt="logo preview"
            class="h-16 object-contain rounded border border-white/10"
          />
        </div>
        }
      </div>
      <div class="md:col-span-2 flex items-center gap-2">
        <button
          class="btn btn-primary"
          type="submit"
          [disabled]="form.invalid || saving()"
        >
          {{
            saving()
              ? ("LOGIN.PROCESSING" | translate)
              : ("ADMIN.APP_INFO.SAVE" | translate)
          }}
        </button>
        @if (saved()) {
        <span class="text-success text-sm">{{
          "ADMIN.APP_INFO.SAVED" | translate
        }}</span>
        }
      </div>
    </form>
  </div>
  @if (!loaded()) {
  <div class="text-sm opacity-70">{{ "COMMON.LOADING" | translate }}</div>
  }
</div>
