<div class="p-6 space-y-4 vt-page">
  <div class="flex items-center justify-between gap-3">
    <h2 class="text-xl font-semibold">{{ 'ADMIN.FILES.TITLE' | translate }} ({{ total() }})</h2>
    <div class="flex items-center gap-2 glass-card p-2 rounded-lg">
      <select #t class="w-40" (change)="onTypeChange(t.value)">
        <option value="">{{ 'ADMIN.FILES.TYPE_ALL' | translate }}</option>
        <option value="image">image</option>
        <option value="pdf">pdf</option>
        <option value="document">document</option>
      </select>
      <input #sf class="w-48" [value]="subfolder()" (change)="subfolder.set(sf.value); applyFilters()" [placeholder]="'ADMIN.FILES.SUBFOLDER' | translate" />
    </div>
    <div class="flex gap-2">
      <button class="btn btn-sm" (click)="prev()" [disabled]="offset()<=0">{{ 'COMMON.PREVIOUS' | translate }}</button>
      <button class="btn btn-sm" (click)="next()" [disabled]="offset()+limit()>=total()">{{ 'COMMON.NEXT' | translate }}</button>
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 page-stagger">
    @for (f of items(); track f.url) {
      <div class="p-3 glass-card space-y-1">
        <div class="font-medium truncate" [title]="f.filename">{{ f.filename }}</div>
        <div class="text-xs opacity-70">{{ f.content_type }} â€¢ {{ f.type_file }}</div>
        <div class="text-xs opacity-70" *ngIf="f.session_id">Session: <span class="font-mono">{{ f.session_id }}</span></div>
        <div class="text-xs opacity-70" *ngIf="f.owner_id">
          User:
          <span class="font-mono" [attr.title]="userLabel(f.owner_id)">{{ getCachedUserLabel(f.owner_id) || f.owner_id }}</span>
        </div>
        <a [href]="f.url" target="_blank" class="btn btn-ghost btn-xs mt-1">{{ 'COMMON.OPEN' | translate }}</a>
      </div>
    }
  </div>
</div>
